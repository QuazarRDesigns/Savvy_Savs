<div class="sidebar">

    <div class="logo">
        <svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 394 165"><defs><style>.cls-1{fill:#FFC853;}</style></defs><title>Artboard 1</title><path class="cls-1" d="M51,55a9.82,9.82,0,0,1-4,5,.67.67,0,0,1-.94-.3l-1.7-3.4c-1.29,1.51-3.13,1.31-4.86.34a23.5,23.5,0,0,0-4-1.7c-4.23-1.41-10-1.38-13.87,1.17a7.5,7.5,0,0,0-1.42,10.7A12.48,12.48,0,0,0,24.33,70q2.53,1.26,5.64,2.45a60.31,60.31,0,0,1,6.16,2.81A31.64,31.64,0,0,1,41.71,79a15.26,15.26,0,0,1,4.13,5.75c3.09,7.08,2.11,17.17-3.95,22.43a21.51,21.51,0,0,1-13.42,4.77,27.35,27.35,0,0,1-15.13-3.39c-3.81-2.27-5.72-4.63-5.72-7a4.88,4.88,0,0,1,.07-.84h0l-4-.79a.68.68,0,0,1-.51-.9,9.77,9.77,0,0,1,4-5,.68.68,0,0,1,.94.3l1.52,3c1.32-1.13,2.9-1,4.42.27.91.77,1.81,1.58,2.7,2.45a12.81,12.81,0,0,0,4,2.47c4.34,1.81,10.39,1.71,14.19-1.28,4.35-3.41,3.86-10.56.1-14.17a22,22,0,0,0-7.19-4.54c-5.75-2.32-11.82-4.43-15.69-9.55C8.48,68.06,8.21,60.36,11,55A13.2,13.2,0,0,1,16,49.7,23.53,23.53,0,0,1,22.47,47a34.3,34.3,0,0,1,12.24-.53,35.21,35.21,0,0,1,5.19,1,12.13,12.13,0,0,1,4.25,2,4,4,0,0,1,1.6,3.7l4.74.95A.68.68,0,0,1,51,55Z"/><path class="cls-1" d="M276.68,55a9.82,9.82,0,0,1-4,5,.67.67,0,0,1-.94-.3l-1.7-3.4c-1.29,1.51-3.13,1.31-4.86.34a23.5,23.5,0,0,0-4-1.7c-4.23-1.41-10-1.38-13.87,1.17a7.5,7.5,0,0,0-1.42,10.7A12.48,12.48,0,0,0,250,70q2.53,1.26,5.64,2.45a60.31,60.31,0,0,1,6.16,2.81A31.64,31.64,0,0,1,267.4,79a15.26,15.26,0,0,1,4.13,5.75c3.09,7.08,2.11,17.17-3.95,22.43a21.51,21.51,0,0,1-13.42,4.77A27.35,27.35,0,0,1,239,108.53c-3.81-2.27-5.72-4.63-5.72-7a4.88,4.88,0,0,1,.07-.84h0l-4-.79a.68.68,0,0,1-.51-.9,9.77,9.77,0,0,1,4-5,.68.68,0,0,1,.94.3l1.52,3c1.32-1.13,2.9-1,4.42.27.91.77,1.81,1.58,2.7,2.45a12.81,12.81,0,0,0,4,2.47c4.34,1.81,10.39,1.71,14.19-1.28,4.35-3.41,3.86-10.56.1-14.17a22,22,0,0,0-7.19-4.54c-5.75-2.32-11.82-4.43-15.69-9.55-3.7-4.88-4-12.58-1.15-17.94a13.2,13.2,0,0,1,4.93-5.31,23.53,23.53,0,0,1,6.51-2.7,34.3,34.3,0,0,1,12.24-.53,35.21,35.21,0,0,1,5.19,1,12.13,12.13,0,0,1,4.25,2,4,4,0,0,1,1.6,3.7l4.74.95A.68.68,0,0,1,276.68,55Z"/><path class="cls-1" d="M52.66,100.24q0-7.09,5.32-9.89t15.43-2.79h3.9V85.93A11.2,11.2,0,0,0,75.14,79c-2.38-3.18-6.82-3.33-10.38-2.5a27.52,27.52,0,0,0-5.15,2.15,2.48,2.48,0,0,1-3.36-1.1c-.79-1.24-1.35-3.13-.58-4.5s2.53-2.17,3.95-2.72c7-2.73,17.24-2.79,22.61,3.24a17.77,17.77,0,0,1,4.39,12.28v22.26a2.67,2.67,0,0,1-1.29,2.17,5.58,5.58,0,0,1-6.25,0,2.68,2.68,0,0,1-1.24-2.17V105a18.9,18.9,0,0,1-10.44,6.63c-4,.78-8.36,0-11.42-2.73Q52.66,105.92,52.66,100.24Zm9.4-1.15a5.54,5.54,0,0,0,1.6,4.3c3.14,2.88,7.88,1.15,10.6-1.37q3.06-2.84,3.06-6V92.71H75.09a48.63,48.63,0,0,0-6.52.35,9.59,9.59,0,0,0-4.52,1.86A4.93,4.93,0,0,0,62.06,99.09Z"/><path class="cls-1" d="M91.41,72.84q0-1.6,2-2.79c1.85-1.08,5.89-2.3,6.92.49l10.55,28,10.55-27.84c1.12-2.93,4.72-1.75,6.74-.62,1.75,1,2.65,2.28,1.86,4.26l-14.9,35.91c-.69,1.6-2.73,1.86-4.26,1.86s-3.57-.26-4.26-1.86L91.85,74.35A3.5,3.5,0,0,1,91.41,72.84Z"/><path class="cls-1" d="M132.11,72.84q0-1.6,2-2.79c1.85-1.08,5.89-2.3,6.92.49l10.55,28,10.55-27.84c1.12-2.93,4.72-1.75,6.74-.62,1.75,1,2.65,2.28,1.86,4.26l-14.9,35.91c-.69,1.6-2.73,1.86-4.26,1.86s-3.57-.26-4.26-1.86L132.55,74.35A3.5,3.5,0,0,1,132.11,72.84Z"/><path class="cls-1" d="M172.89,127.2a5.11,5.11,0,0,1,.78-3.18,2.8,2.8,0,0,1,2.31-.83,12,12,0,0,0,7.37-3.8q3.9-3.81,4.79-10.73l-14.9-34.4c-2.69-3.36,6.93-8.52,8.6-4L193,99.09l9.58-28.82c1.3-2.74,4.73-1.55,6.69-.31,1.17.74,3,2.74,2,4.3l-13.12,34.67-1.51,4L195,116.74a35,35,0,0,1-1.91,3.9L191,123.92a18.25,18.25,0,0,1-5.67,5.19,11.68,11.68,0,0,1-3.72,1.6C178.24,131.5,172.89,131.95,172.89,127.2Z"/><path class="cls-1" d="M277.87,100.24q0-7.09,5.32-9.89t15.43-2.79h3.9V85.93c0-3.41-1.38-7.33-4.61-8.94s-7.74-1-10.86.6c-2,1-4,2.48-5.59,0-.79-1.24-1.36-3.13-.58-4.5s2.53-2.17,4-2.72c7-2.73,17.24-2.78,22.61,3.24a17.77,17.77,0,0,1,4.39,12.28v22.26a2.66,2.66,0,0,1-1.29,2.17,5.58,5.58,0,0,1-6.25,0,2.68,2.68,0,0,1-1.24-2.17V105a18.89,18.89,0,0,1-10.44,6.63c-4,.78-8.36,0-11.42-2.73Q277.87,105.92,277.87,100.24Zm9.4-1.15a5.54,5.54,0,0,0,1.6,4.3c4.9,4.5,13.65-1.6,13.65-7.4V92.71h-2.22a48.63,48.63,0,0,0-6.52.35,9.6,9.6,0,0,0-4.52,1.86A4.93,4.93,0,0,0,287.27,99.09Z"/><path class="cls-1" d="M316.62,72.84q0-1.6,2-2.79c1.85-1.08,5.88-2.3,6.92.49l10.55,28,10.55-27.84c1.11-2.93,4.72-1.75,6.74-.62,1.75,1,2.65,2.28,1.86,4.26l-14.9,35.91c-.69,1.6-2.73,1.86-4.26,1.86s-3.57-.26-4.26-1.86L317.06,74.35A3.5,3.5,0,0,1,316.62,72.84Z"/><path class="cls-1" d="M358.74,104.85a5,5,0,0,1,.94-2.75c1.23-1.86,2.91-1.54,4.51-.38,3.86,2.81,9.48,4.14,14.09,2.52a4.59,4.59,0,0,0,.94-8.27,18.22,18.22,0,0,0-5.36-2.32q-3.15-.85-6.25-1.92a12.11,12.11,0,0,1-5.32-3.66C358.07,83.17,360.1,75,365,71.37c5.23-3.84,13.62-3.31,19.38-1.14,1.32.5,3,1.19,3.75,2.46s.09,2.92-.65,4.11c-1.63,2.62-3.94,1.26-6.16.31-3.28-1.4-8.33-2.36-11.31.28-2.32,2.05-2.46,5.35.4,7a21.91,21.91,0,0,0,5.41,2.05,58.92,58.92,0,0,1,6.29,2,11.76,11.76,0,0,1,5.28,4c3.64,4.77,2.77,12.58-1.9,16.32-2.87,2.3-6.64,3.09-10.24,3.24a25,25,0,0,1-12.06-2.19Q358.74,107.51,358.74,104.85Z"/></svg>
    </div>
    <?php if (!isset($username)): ?>
        <a class="sidebar__box" href="index.php?module=auth&page=login">
            <p class="sidebar__text">Log In</p>
        </a>
        <a class="sidebar__link" href="index.php?module=profile&page=signup">Sign Up</a>
    <?php endif; ?>
    <?php if (isset($username)): ?>
        <a class="sidebar__box" href="index.php?module=profile&page=profile">
            <div class="user">
                <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 70 70"><defs><style>.cls-3{fill:#ff0d3b;}.cls-4{fill:#f1f1f1;}</style><symbol id="User" data-name="User" viewBox="0 0 70 70"><path class="cls-3" d="M70,35A35,35,0,1,1,35,0,34.83,34.83,0,0,1,70,35Z"/><circle class="cls-4" cx="34.66" cy="26.16" r="22"/><path class="cls-4" d="M64.36,54.06a35,35,0,0,1-59-.4,43,43,0,0,1,59,.4Z"/></symbol></defs><title>profile_placeholder</title><g id="Layer_2" data-name="Layer 2"><g id="Layer_1-2" data-name="Layer 1"><use id="User-3" data-name="User" width="70" height="70" xlink:href="#User"/></g></g></svg>
            </div>
            <p class="sidebar__text"><?php echo $username ?></p>
        </a>
        <a class="sidebar__link" href="index.php?module=auth&page=login&logout=true">Log Out</a> 
        <?php if ($admin): ?>
            <a class="sidebar__box" href="index.php?module=posts&page=add-edit&user_id=<?php echo $user_id ?>"><p class="sidebar__text">+ Add Post</p></a>
        <?php endif; ?>
    <?php endif; ?>
</div>

<div class="post__wrapper">

    <?php foreach ($posts as $post): ?>
        <div class="post">
            <div class="post__header">
                <div class="post__profile">
                    <div class="user">
                        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 70 70"><defs><style>.cls-3{fill:#ff0d3b;}.cls-4{fill:#f1f1f1;}</style><symbol id="User" data-name="User" viewBox="0 0 70 70"><path class="cls-3" d="M70,35A35,35,0,1,1,35,0,34.83,34.83,0,0,1,70,35Z"/><circle class="cls-4" cx="34.66" cy="26.16" r="22"/><path class="cls-4" d="M64.36,54.06a35,35,0,0,1-59-.4,43,43,0,0,1,59,.4Z"/></symbol></defs><title>profile_placeholder</title><g id="Layer_2" data-name="Layer 2"><g id="Layer_1-2" data-name="Layer 1"><use id="User-3" data-name="User" width="70" height="70" xlink:href="#User"/></g></g></svg>
                    </div>
                    <p class="post__username"><?php echo Utils::escape($post->getUsername()); ?></p>
                </div>
                <a class="post__delete" href="index.php?module=posts&page=delete&id=<?php echo $post->getId() ?>"><span class="delete-span"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 45.77 15.26"><defs><style>.cls-5{fill:#ff0d3b;}</style></defs><title>Minus Sign</title><g id="Layer_6" data-name="Layer 6"><g id="Layer_5-6" data-name="Layer 5"><rect class="cls-5" x="15.26" y="-15.26" width="15.26" height="45.77" rx="6" ry="6" transform="translate(15.26 30.52) rotate(-90)"/></g></g></svg></span></a>
            </div>
            <p class="post__title"><?php echo Utils::escape($post->getTitle()); ?></p>
            <p class="post__text">
                <?php echo Utils::escape($post->getText()); ?>
            </p>
            <div class="post__footer">
                <p class="post__time-since"><?php echo Utils::escape(Utils::timeSince(new DateTime($post->getDate_created(), new DateTimeZone('NZ')))); ?></p>
                <?php if (isset($username)): ?>
                    <a class="post__link" href="index.php?module=comments&page=add-edit&post_id=<?php echo $post->getId(); ?>&user_id=<?php echo $user_id ?>">Comment</a>
                    <?php if ($admin): ?>
                        <a class="post__link" href="index.php?module=posts&page=delete&id=<?php echo $post->getId(); ?>">Delete</a>
                        <a class="post__link" href="index.php?module=posts&page=add-edit&id=<?php echo $post->getId(); ?>">Edit</a>
                    <?php endif; ?>
                <?php endif; ?>
            </div>
        </div>
        <?php foreach ($comments as $comment): ?>
            <?php if (Utils::escape($comment->getPost_id()) === Utils::escape($post->getId())) { ?>
                <div class="comment">
                    <div class="comment__profile">
                        <div class="comment__user">
                            <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 70 70"><defs><style>.cls-3{fill:#ff0d3b;}.cls-4{fill:#f1f1f1;}</style><symbol id="User" data-name="User" viewBox="0 0 70 70"><path class="cls-3" d="M70,35A35,35,0,1,1,35,0,34.83,34.83,0,0,1,70,35Z"/><circle class="cls-4" cx="34.66" cy="26.16" r="22"/><path class="cls-4" d="M64.36,54.06a35,35,0,0,1-59-.4,43,43,0,0,1,59,.4Z"/></symbol></defs><title>profile_placeholder</title><g id="Layer_2" data-name="Layer 2"><g id="Layer_1-2" data-name="Layer 1"><use id="User-3" data-name="User" width="70" height="70" xlink:href="#User"/></g></g></svg>
                        </div>
                        <p class="comment__username"><?php echo Utils::escape($comment->getUsername()); ?></p>
                    </div>
                    <p class="comment__text"><?php echo Utils::escape($comment->getComment()); ?></p>
                    <div class="comment__footer">
                        <p class="comment__time-since"><?php echo Utils::escape(Utils::timeSince(new DateTime($comment->getDate_created(), new DateTimeZone('NZ')))); ?></p>
                        <?php if (isset($username)): ?>
                            <?php if ($admin): ?>
                                <a class="comment__link" href="index.php?module=comments&page=delete&id=<?php echo $comment->getId() ?>">Delete</a>
                            <?php endif; ?>
                            <a class="comment__link" href="index.php?module=comments&page=add-edit&id=<?php echo $comment->getId() ?>">Edit</a>
                        <?php endif; ?>
                    </div>
                </div><?php } ?>
        <?php endforeach; ?>
    <?php endforeach; ?>

</div>
